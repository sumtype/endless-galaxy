function countKeyValuePairs(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t}function countSpecificKeyValuePairs(e,t){var i=0;for(var r in e)e.hasOwnProperty(r)&&r.toString().indexOf(t)!==-1&&i++;return i}function addResourcesForLoading(e){for(var t=1;t<200;t++){var i="assets/player/spaceship"+t.toString()+".png",r="player"+t.toString();e.add(r,i)}e.add("particleDemo","assets/particles/demo.png"),e.add("particleBg","assets/particles/bg.png")}function renderGame(){requestAnimationFrame(renderGame),renderer.render(stage)}function initializeView(){document.getElementById("game").appendChild(renderer.view),window.onresize=function(){renderer.view.style.width=window.innerWidth+"px",renderer.view.style.height=window.innerHeight+4+"px",renderer.resize(window.innerWidth,window.innerHeight+4)}}function initializeLoading(){var e=PIXI.loader,t=new LoadingImage("assets/loader.gif",50,50,"loadingAssets");t.display(),addResourcesForLoading(e),e.on("progress",function(e){t.updateText(Math.ceil(e.progress).toString()+"%")}),e.once("complete",function(e,r){for(t.updateText("Assets loaded.  Preparing game objects."),i=1;i<countSpecificKeyValuePairs(r,"player")+1;i++)playerTextures.push(r["player"+i.toString()].texture);player=new Player(playerTextures,window.innerWidth/2,window.innerHeight/3*2,150,150,75,75,0,0,stage,renderer,(!0));t.remove(),renderGame();window.addEventListener("mousemove",function(e){particleSystem.position(e.clientX,e.clientY)})}),e.load()}var LoadingImage=function(e,t,i,r){this.figureTag=document.createElement("figure"),this.figureTag.style.position="absolute",this.figureTag.style.top=i.toString()+"%",this.figureTag.style.left=t.toString()+"%",this.figureTag.id=r,this.imgTag=document.createElement("img"),this.imgTag.src=e,this.captionTag=document.createElement("figcaption"),this.captionTag.style.color="white",this.captionTagText=document.createTextNode("0%"),this.captionTag.appendChild(this.captionTagText),this.figureTag.appendChild(this.imgTag),this.figureTag.appendChild(this.captionTag),this.figureParent=document.getElementById("game")};LoadingImage.prototype.display=function(){this.figureParent.appendChild(this.figureTag)},LoadingImage.prototype.remove=function(){this.figureTag.parentNode.removeChild(this.figureTag)},LoadingImage.prototype.updateText=function(e){this.captionTagText.parentNode.removeChild(this.captionTagText),this.captionTagText=document.createTextNode(e),this.captionTag.appendChild(this.captionTagText)},LoadingImage.prototype.setX=function(e){this.figureTag.style.left=e.toString()+"%"},LoadingImage.prototype.setY=function(e){this.figureTag.style.top=e.toString()+"%"};var Graphic=function(e,t,i,r,n,o){this.sprite=new PIXI.Sprite(e),this.sprite.position.x=t,this.sprite.position.y=i;var a=(e.width,e.height,r/e.width),d=n/e.height;this.width=r,this.height=n,this.sprite.scale.x=a,this.sprite.scale.y=d,this.stage=o,this.stage.addChild(this.sprite)},ParticleSystem=function(e,t,i){this.elapsed=Date.now(),this.emitterContainer=new PIXI.Container,i.addChild(this.emitterContainer),this.emitter=new cloudkid.Emitter(this.emitterContainer,[PIXI.Texture.fromImage(e)],t),this.emitter.updateOwnerPos(window.innerWidth/2,(window.innerHeight+4)/2),console.log(this);var r=this;this.update=window.setInterval(function(){var e=Date.now();r.emitter.update(.001*(e-r.elapsed)),r.elapsed=e},10)};ParticleSystem.prototype.remove=function(){clearInterval(this.update),this.emitter.destroy(),this.emitter=null},ParticleSystem.prototype.position=function(e,t){this.emitter.updateOwnerPos(e,t)},ParticleSystem.prototype.maxParticles=function(e){return void 0!==typeof e&&(this.emitter.maxParticles=e),this.emitter.maxParticles},ParticleSystem.prototype.emitterLifetime=function(e){return void 0!==typeof e&&(this.emitter.emitterLifetime=e),this.emitter.emitterLifetime},ParticleSystem.prototype.frequency=function(e){return void 0!==typeof e&&(this.emitter.frequency=e),this.emitter.frequency},ParticleSystem.prototype.minLifetime=function(e){return void 0!==typeof e&&(this.emitter.minLifetime=e),this.emitter.minLifetime},ParticleSystem.prototype.maxLifetime=function(e){return void 0!==typeof e&&(this.emitter.maxLifetime=e),this.emitter.maxLifetime},ParticleSystem.prototype.startSpeed=function(e){return void 0!==typeof e&&(this.emitter.startSpeed=e),this.emitter.startSpeed},ParticleSystem.prototype.endSpeed=function(e){return void 0!==typeof e&&(this.emitter.endSpeed=e),this.emitter.endSpeed},ParticleSystem.prototype.startAlpha=function(e){return void 0!==typeof e&&(this.emitter.startAlpha=e),this.emitter.startAlpha},ParticleSystem.prototype.endAlpha=function(e){return void 0!==typeof e&&(this.emitter.endAlpha=e),this.emitter.endAlpha},ParticleSystem.prototype.startScale=function(e){return void 0!==typeof e&&(this.emitter.startScale=e),this.emitter.startScale},ParticleSystem.prototype.endScale=function(e){return void 0!==typeof e&&(this.emitter.endScale=e),this.emitter.endScale},ParticleSystem.prototype.startColor=function(e){return void 0!==typeof e&&(this.emitter.startColor=e),this.emitter.startColor},ParticleSystem.prototype.endColor=function(e){return void 0!==typeof e&&(this.emitter.endColor=e),this.emitter.endColor},ParticleSystem.prototype.minStartRotation=function(e){return void 0!==typeof e&&(this.emitter.minStartRotation=e),this.emitter.minStartRotation},ParticleSystem.prototype.maxStartRotation=function(e){return void 0!==typeof e&&(this.emitter.maxStartRotation=e),this.emitter.maxStartRotation},ParticleSystem.prototype.minRotationSpeed=function(e){return void 0!==typeof e&&(this.emitter.minRotationSpeed=e),this.emitter.minRotationSpeed},ParticleSystem.prototype.maxRotationSpeed=function(e){return void 0!==typeof e&&(this.emitter.maxRotationSpeed=e),this.emitter.maxRotationSpeed};var Player=function(e,t,i,r,n,o,a,d,s,p,h,c){this.textures=[];for(var m=0;m<e.length;m++)this.textures.push(new PIXI.Texture(e[m]));this.textureIndexPadding=(e.length-1)/2,this.graphic=new Graphic(e[0],t,i,r,n,p),this.type="PLAYER",this.decelerationXSpeed=.1,this.decelerationYSpeed=.1,this.accelerationXSpeed=.2,this.accelerationYSpeed=.2,this.decelerateXSpeed=!0,this.decelerateYSpeed=!0,this.accelerationFrequency=o,this.decelerationFrequency=a,this.xSpeed=d,this.ySpeed=s,this.minSpeedX=-2,this.minSpeedY=-2,this.maxSpeedX=2,this.maxSpeedY=1,this.wPress=!1,this.aPress=!1,this.sPress=!1,this.dPress=!1,this.shooting=!1,this.movementBound=c,this.renderer=h,this.stage=p,this.inViewport=!0,this.initialize()};Player.prototype.initialize=function(){0!==this.xSpeed&&(this.decelerateXSpeed=!0),0!==this.ySpeed&&(this.decelerateYSpeed=!0),this.movement(this)},Player.prototype.isInViewport=function(){return this.inViewport},Player.prototype.movement=function(e){window.setInterval(function(){var t=e.graphic.sprite.position.x+e.xSpeed,i=e.graphic.sprite.position.y+e.ySpeed;t>e.renderer.width-e.graphic.width&&e.movementBound&&(t=e.renderer.width-e.graphic.width),t<0&&e.movementBound&&(t=0),i>e.renderer.height-e.graphic.height&&e.movementBound&&(i=e.renderer.height-e.graphic.height),i<0&&e.movementBound&&(i=0),e.graphic.sprite.texture=e.textures[function(){return e.xSpeed>0?Math.ceil(e.textureIndexPadding*(e.xSpeed/e.maxSpeedX))-1:e.xSpeed<0?e.textureIndexPadding+-1*Math.ceil(e.textureIndexPadding*(e.xSpeed/e.maxSpeedX)):0}()],e.graphic.sprite.position.x=t,e.graphic.sprite.position.y=i,t<-e.graphic.width||t>e.renderer.width||i<-e.graphic.height||i>e.renderer.height?e.inViewport=!0:e.inViewport=!1},17),window.onkeydown=function(t){87===t.keyCode&&(e.wPress=!0,e.decelerateYSpeed=!1),65===t.keyCode&&(e.aPress=!0,e.decelerateXSpeed=!1),68===t.keyCode&&(e.dPress=!0,e.decelerateXSpeed=!1),38===t.keyCode&&(e.wPress=!0,e.decelerateYSpeed=!1),37===t.keyCode&&(e.aPress=!0,e.decelerateXSpeed=!1),39===t.keyCode&&(e.dPress=!0,e.decelerateXSpeed=!1),32===t.keyCode&&(e.shooting=!0)},window.onkeyup=function(t){87===t.keyCode&&(e.wPress=!1,e.decelerateYSpeed=!0),65===t.keyCode&&(e.aPress=!1,e.decelerateXSpeed=!0),68===t.keyCode&&(e.dPress=!1,e.decelerateXSpeed=!0),38===t.keyCode&&(e.wPress=!1,e.decelerateYSpeed=!0),37===t.keyCode&&(e.aPress=!1,e.decelerateXSpeed=!0),39===t.keyCode&&(e.dPress=!1,e.decelerateXSpeed=!0),32===t.keyCode&&(e.shooting=!1)},window.setInterval(function(){e.wPress&&(e.ySpeed>0&&(e.ySpeed=0),e.ySpeed-=e.accelerationYSpeed,e.ySpeed<e.minSpeedY&&(e.ySpeed=e.minSpeedY)),e.aPress&&(e.xSpeed-=e.accelerationXSpeed,e.xSpeed<e.minSpeedX&&(e.xSpeed=e.minSpeedX)),e.dPress&&(e.xSpeed+=e.accelerationXSpeed,e.xSpeed>e.maxSpeedX&&(e.xSpeed=e.maxSpeedX))},e.accelerationFrequency),window.setInterval(function(){e.xSpeed>0&&e.decelerateXSpeed&&(e.xSpeed-=e.decelerationXSpeed,e.xSpeed-e.decelerationXSpeed<0&&(e.xSpeed=0)),e.xSpeed<0&&e.decelerateXSpeed&&(e.xSpeed+=e.decelerationXSpeed,e.xSpeed+e.decelerationXSpeed>0&&(e.xSpeed=0)),e.decelerateYSpeed&&(e.ySpeed<e.maxSpeedY&&(e.ySpeed+=e.decelerationYSpeed),e.ySpeed>e.maxSpeedY&&(e.ySpeed=e.maxSpeedY),e.graphic.sprite.position.y===window.innerHeight+4-e.graphic.height&&(e.ySpeed=0))},e.decelerationFrequency)};var renderer=new PIXI.WebGLRenderer(window.innerWidth,window.innerHeight+4),stage=new PIXI.Container,player=null,playerTextures=[],playerTexturesLength=0,particleSystems=[],particleSystem=null;initializeView(renderer),initializeLoading();
//# sourceMappingURL=game.min.js.map
